<script>


  function save(){
    materialLoading(true);

    $("#save").prop("disabled", true)

    google.script.run
  		.withSuccessHandler(showSidebar)
  		.withFailureHandler(function (e) {
  			$("#save").prop("disabled", false)
  			materialLoading(false);
        showError("Error saving selected columns")
  		})
  		.setProps(["shortenType", "chunkAmount"], [$('#shorten').val(), $('#chunk').val()])
  }

  function showError(error){
    google.script.run
      .withSuccessHandler(function (output) {
        $("#error").show()
        $("#error").html(output)
      })
      .sanitize(error.toString());
  }

  function hideError(){
    $("#error").hide()
  }
</script>
